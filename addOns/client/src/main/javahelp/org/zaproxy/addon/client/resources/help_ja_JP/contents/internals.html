<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>
クライアントサイド統合 - 内部構造
</TITLE>
</HEAD>
<BODY>
<H1>クライアントサイド統合 - 内部構造</H1>

<H2>ブラウザ拡張機能</H2>

この<a href="client.html">アドオン</a>は、FirefoxとChromeで動作する<a href="https://github.com/zaproxy/browser-extension">ZAPブラウザ拡張機能</a>に依存しています。この拡張機能が存在しない場合、このアドオンは何も実行できません。
<p>
ブラウザ拡張機能はZAPと通信できる必要がありますが、悪意のあるターゲットがこのアドオンが定義するAPIエンドポイントを悪用できないように、安全な方法で行う必要があります。
構成の詳細をブラウザ拡張機能に渡すのは困難な場合があります。そのため、ブラウザの起動方法に応じて2つの異なる方法で行われます。

<H2>ZAPからのブラウザ起動</H2>

ZAPでこのアドオンが有効な状態でFirefoxまたはChromeを起動すると、ZAPブラウザ拡張機能が自動的に追加されます。
 このアドオンは、 <pre>http://zap/zapCallBackUrl/12345678901234567890</pre> のようなコールバックURLも開きます。このURLはZAPが起動されるたびに再生成され、悪意のあるターゲットが発見することが非現実的であるため、安全であると見なされます。
<p>
ブラウザ拡張機能は、コンテキストスクリプトの<a href="https://github.com/zaproxy/browser-extension/blob/main/source/ContentScript/index.ts">index.ts</a>でこの形式のURLを検出し、そのURLを使用してブラウザからZAPにデータを渡します。

<H2>手動でのブラウザ起動</H2>

FirefoxまたはChromeを他の方法で起動する場合、次の場所からブラウザ拡張機能を自分でインストールする必要があります。

<ul>
<li><a href="https://addons.mozilla.org/en-GB/firefox/addon/zap-browser-extension/">Firefox Add-Ons</a>
<li><a href="https://chrome.google.com/webstore/detail/zap-browser-extension/oeadiegekjdlhpooeidmimgnmbfllehp">Chrome Web Store</a>
</ul>

インストールしたら、ZAPブラウザ拡張機能を手動で設定する必要があります。 FirefoxまたはChromeで：

<ul>
<li>「拡張機能」ボタンをクリックします
<li>「ZAPブラウザ拡張機能」を選択します
<li>拡張機能の「設定」画面を更新します
</ul>

設定する必要がある項目：

<ul>
<li>ZAP API URL: デフォルトは <pre>http://zap/</pre> で、すべての場合に機能するはずですが、ZAPが待機しているホストとポートを使用することもできます。例： <pre>http://localhost:8080</pre>
<li>ZAP API Key: これはZAPのAPIオプション画面で見つけることができます
</ul>

ZAPでAPIキーをオフにしている場合は、ZAP API Keyを空欄にすることもできますが、これはZAPを介してアクセスするWebサイトを信頼している安全な環境でのみ推奨されます。

</BODY>
</HTML>
